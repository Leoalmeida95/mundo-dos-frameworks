{% load staticfiles %}

<!DOCTYPE html>
<html lang="br">

<head>
	<meta charset="utf-8">
	<title> {% block titulo %}{% endblock %}</title>

  <link rel="icon" href="{% static 'favicon-16x16.png' %}">
	<link href="https://unpkg.com/bootstrap@4.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://unpkg.com/toastr@2.1.4/build/toastr.min.css" rel="stylesheet">
	<link href="{% static 'drop_nav.css' %}" rel="stylesheet">
  <link href="{% static 'comment.css' %}" rel="stylesheet">
	<script src="https://unpkg.com/jquery@3.3.1/dist/jquery.min.js"></script>
	<script src="https://unpkg.com/popper.js@1.14.4/dist/umd/popper.min.js"></script>
	<script src="https://unpkg.com/bootstrap@4.1.3/dist/js/bootstrap.min.js"></script>
	<script src="https://unpkg.com/@fortawesome/fontawesome@1.1.8/index.js"></script>
	<script src="https://unpkg.com/@fortawesome/fontawesome-free-solid@5.0.13/index.js"></script>
	<script src="https://unpkg.com/@fortawesome/fontawesome-free-brands@5.0.13/index.js"></script>
	<script src="https://unpkg.com/toastr@2.1.4/build/toastr.min.js"></script>
	<script src="https://unpkg.com/fusioncharts@3.13.1/fusioncharts.js"></script>
	<script src="https://unpkg.com/fusioncharts@3.13.1/fusioncharts.charts.js"></script>
  <script src="{% static 'toastr.js' %}"></script>
</head>

<body>
	<!-- HEADER -->
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		<span class="navbar-brand mb-0">Mundo dos Frameworks</span>
		<button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
		 aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item">
					<a class="nav-link" href="/"><i class="fa fa-home" aria-hidden="true"></i> Início</a>
				</li>
				<li class="nav-item dropdown has-mega-menu">
					<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true"
					 aria-expanded="false"><i class="fa fa-code" aria-hidden="true"></i> Linguagens</a>
					<div class="dropdown-menu dropdown-menu-left">
						<div class="px-0 container container-sm">
							<div class="row">
								{%for lg in linguagens %} {% if lg.id|divisibleby:"2" %}
								<div class="col-sm-6 col-md-x">
									<a class="dropdown-item" href="{% url 'wofapp:frameworks' lg.frameworks.first.id %}">{{lg.nome}}</a>
								</div>
								{% else %}
								<div class="col-sm-6 col-md-x">
									<a class="dropdown-item" href="{% url 'wofapp:frameworks' lg.frameworks.first.id %}">{{lg.nome}}</a>
								</div>
								{%endif%} {% endfor %}
							</div>
						</div>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="/faq">FAQ</a>
				</li>
			</ul>
			{% if user.is_authenticated %}
			<ul class="navbar-nav mr-3">
				<li class="nav-item dropdown">
					<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<i class="fa fa-user-circle-o" aria-hidden="true"></i>
						<strong class="ml-1">{{ user.first_name }}</strong>
					</a>
					<div id="login-dp" class="col-12 dropdown-menu dropdown-menu-right">
						<div class="row">
							<div class="dropdown-item disabled">
								<div class="font-weight-light">
									<div class="text-truncate">
										<i class="fa fa-user" aria-hidden="true"></i>
										{{user.get_full_name}}
									</div>
								</div>
							</div>
							<div class="dropdown-item disabled">
								<div class="font-weight-light">
									<div class="text-truncate">
										<i class="fa fa-address-card-o" aria-hidden="true"></i>
										{{ user.perfil }}
									</div>
								</div>
							</div>
							<div class="dropdown-item disabled">
								<div class="font-weight-light">
									<div class="text-truncate">
										<i class="fa fa-envelope-o" aria-hidden="true"></i>
										{{user.email}}
									</div>
								</div>
							</div>
							<div class="dropdown-item disabled">
								<a class="btn btn-outline-warning btn-sm btn-block" role="button" href="">
									<i class="fa fa-star-o" aria-hidden="true"></i> Favoritos</a>
							</div>
							<div class="dropdown-item disabled">
								<a class="btn btn-outline-primary btn-sm btn-block" role="button" href="{% url 'wofapp:atualizar' %}">
									<i class="fa fa-pencil fa-fw"></i> Atualizar Dados</a>
							</div>
							<div class="dropdown-item disabled">
								<a class="btn btn-outline-info btn-sm btn-block" role="button" href="{% url 'wofapp:trocar_senha' %}">
									<i class="fa fa-key" aria-hidden="true"></i> Alterar Senha</a>
							</div>
							<div class="bottom dropdown-item disabled">
								<form class="form" role="form" method="POST" action="/logout/" id="login-nav">
									{% csrf_token %}
									<div class="row">
										<div class="col-sm-11 mx-auto">
											<button type="submit" class="btn btn-outline-danger btn-sm btn-block">
												<i class="fa fa-sign-out" aria-hidden="true"></i> Sair</button>
										</div>
									</div>
									<input type="hidden" name="next" value="{{ request.path }}">
								</form>
							</div>
						</div>
					</div>
				</li>
			</ul>
			{% else %}
			<span class="navbar-text mr-3">
				Você já é cadastrado?
			</span>
			<ul class="navbar-nav mr-3">
				<li class="nav-item dropdown">
					<button type="button" class="btn btn-sm btn-outline-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
					 aria-expanded="false">
						Login
					</button>
					<div id="login-dp" class="dropdown-menu dropdown-menu-right">
						<div class="row">
							<div class="col-md-12">
								Login com
								<div class="social-buttons">
									<a href="#" class="btn btn-fb">
										<i class="fa fa-facebook"></i> Facebook</a>
									<a href="#" class="btn btn-danger">
										<i class="fa fa-google-plus" aria-hidden="true"></i> Gmail</a>
								</div>
								ou
								<form class="form" role="form" method="POST" action="/login/" id="login-nav">
									{% csrf_token %}
									<div class="form-group mt-1">
										<label class="sr-only" for="username">Email</label>
										<input type="email" class="form-control" name="username" id="username" placeholder="Email" required>
									</div>
									<div class="form-group">
										<label class="sr-only" for="password">Senha</label>
										<input type="password" class="form-control" name="password" id="password" placeholder="Senha" required>
										<div class="text-right">
											<a href="{% url 'wofapp:reset_senha' %}">Esqueceu a senha?</a>
										</div>
									</div>
									<div class="form-group">
										<button type="submit" class="btn btn-primary btn-block mt-4">
											<i class="fa fa-sign-in" aria-hidden="true"></i> Entrar</button>
									</div>
									<div class="custom-control custom-checkbox my-1 mr-sm-2">
										<input type="checkbox" class="custom-control-input" id="customControlInline">
										<label class="custom-control-label" for="customControlInline">Lembre-me</label>
									</div>
									<input type="hidden" name="next" value="{{ request.path }}">
								</form>
							</div>
						</div>
						<div class="bottom text-left" style="font-size:92%">
							Novo por aqui?
							<a href="{% url 'wofapp:registrar' %}">
								<b>Registre-se!</b>
							</a>
						</div>
					</div>
				</li>
			</ul>
			{% endif %}
			</div>
	</nav>
	<div class="content">
		{% block conteudo %} {% endblock %}
	</div>
	<!-- FOOTER -->
	<hr style="border:solid 1p">
	<footer class="text-center">
		<small id="footer">
			<p class="font-weight-light mt-3">
				Universidade Federal Rural do Rio de Janeiro
				<br /> Copyright © 2018 Leonardo Almeida
				<br /> Todos os direitos reservados
			</p>
		</small>
	</footer>

	{% if messages %}{% for message in messages %}
	<script type="text/javascript">
		var mensagem = "{{message}}";
		var tag = "{{message.tags}}";
		var title = '';
		if (tag == 'error')
			title = "Aviso";
		else if (tag == 'info')
			title = "Informação";
		else
			title = "Atenção";
		enviarMensagem(mensagem, tag, title);
	</script>{% endfor %}{% endif %}
</body>

</html>